{"version":3,"sources":["config/Index.js","servers/RequestUtil.js","servers/RequestDispatch.js","servers/LoginService.js","servers/DashboardService.js","servers/APIService.js"],"names":["serviceURL","module","exports","getServiceURL","RequestUtil","method","path","request","params","headers","url","includes","paramsArray","Object","keys","forEach","key","push","encodeURIComponent","length","join","Request","credentials","bodyStr","JSON","stringify","body","RequestDispatch","responseType","fetch","then","res","status","json","success","catch","location","href","code","LoginService","login","obj","seriesRequest","handleRequest","DashboardService","fetchUserInfo","APIService"],"mappings":"6GAAA,IAAMA,EAEI,sBAWVC,EAAOC,QAAU,CAChBC,cAAe,WACd,OAAOH,K,gECPYI,E,kGAIjB,SAAqBC,EAAQC,GAAkC,IAOvDC,EAP2BC,EAA2B,uDAAlB,GAAIC,EAAc,uDAAJ,GAClDC,EAAG,UAAMP,2BAAN,OAAwBG,GAO/B,GANIA,EAAKK,SAAS,UAASD,EAAMJ,GAMlB,QAAXD,GAA+B,WAAXA,EAAqB,CACzC,IAAIO,EAAc,GAElBC,OAAOC,KAAKN,GAAQO,SAAQ,SAACC,GAAD,OAASJ,EAAYK,KAAKD,EAAM,IAAME,mBAAmBV,EAAOQ,QACxFJ,EAAYO,OAAS,IACrBT,GAAO,IAAME,EAAYQ,KAAK,MAGlCb,EAAU,IAAIc,QAAQX,EAAK,CACvBL,OAAQA,EACRI,QAASA,SAEV,GAAe,SAAXJ,EAAmB,CAC1B,IAAIO,EAAc,GAElBC,OAAOC,KAAKN,GAAQO,SAAQ,SAACC,GAAD,OAASJ,EAAYK,KAAKD,EAAM,IAAME,mBAAmBV,EAAOQ,QACxFJ,EAAYO,OAAS,IACrBT,GAAO,IAAME,EAAYQ,KAAK,MAElCb,EAAU,IAAIc,QAAQX,EAAK,CACvBL,OAAQ,MACRI,QAASA,EACTa,YAAa,gBAEd,CACH,IAAIC,EAAUC,KAAKC,UAAUjB,GAEd,SAAXH,EACAE,EAAU,IAAIc,QAAQX,EAAK,CACvBL,OAAQ,OACRI,QAASA,EACTiB,KAAMH,IAEQ,QAAXlB,EACPE,EAAU,IAAIc,QAAQX,EAAK,CACvBL,OAAQ,MACRI,QAASA,EACTiB,KAAMH,IAEQ,SAAXlB,EACPE,EAAU,IAAIc,QAAQX,EAAK,CACvBL,OAAQ,MACRI,QAASA,EACTa,YAAa,UACbI,KAAMH,IAEQ,UAAXlB,IAEPE,EAAU,IAAIc,QAAQX,EAAK,CACvBL,OAAQ,OACRI,QAASA,EACTiB,KAAMH,EACND,YAAa,aAIzB,OAAOf,M,KCtEMoB,E,kGAMjB,SAAqBpB,EAASqB,GAC1B,MAAqB,gBAAjBA,EACOC,MAAMtB,GAENsB,MAAMtB,GACRuB,MAAK,SAACC,GACH,GAAIA,EAAIC,QAAU,KAAOD,EAAIC,QAAU,IACnC,OAAOD,EAAIE,OAEX,MAAMF,KAGbD,MAAK,SAACC,GAIH,OAHIA,EAAIG,QAGDH,KAEVI,OAAM,SAACJ,GACJ,GAAW,8BAAPA,GAA8C,6CAAPA,EAA3C,CAoBA,OAdmB,MAAfA,EAAIC,QACE,2EACNI,SAASC,KAAO,gBACT,MAAQN,EAAIC,OACb,uCACC,MAAQD,EAAIC,OACb,uCACC,MAAQD,EAAIC,OACb,iCACCD,EAAIC,QAAU,KAAOD,EAAIC,OAAS,KACnC,mDAIH,CAAEM,KAAMP,EAAIC,gB,KC3C1BO,EAAe,CASxBC,MAAO,SAAUC,GACb,IAAIlC,EAAUH,EAAYsC,cACtB,MACA,sEAEJ,OAAOf,EAAgBgB,cAAcpC,KCdhCqC,EAAmB,CAC5BC,cAAe,SAAUJ,GACrB,IAAIlC,EAAUH,EAAYsC,cACtB,MACA,0EAEJ,OAAOf,EAAgBgB,cAAcpC,KCXvCuC,EAAU,2BACTP,GACAK,GAGQE","file":"static/js/1.048f936a.chunk.js","sourcesContent":["const serviceURL = {\r\n\tRELATIVE_URL: \"\",\r\n\tDEV_URL: \"http://42.192.16.27\", //测试\r\n\r\n\t//hui\r\n\t// RELATIVE_URL: \"\",\r\n\t// DEV_URL: \"http://192.168.168.227:9000\", //开发地址\r\n\r\n\t//hao\r\n\t// RELATIVE_URL: \"\",\r\n\t// DEV_URL: \"http://192.168.68.244:8001\", //开发地址\r\n};\r\n\r\nmodule.exports = {\r\n\tgetServiceURL: () => {\r\n\t\treturn serviceURL.DEV_URL;\r\n\t},\r\n};\r\n","/*\r\n * @Description: Request请求封装\r\n * @Author: lzg\r\n * @Date: 2020-09-22\r\n */\r\n\r\nimport { getServiceURL } from \"../config/Index\";\r\n\r\nexport default class RequestUtil {\r\n    //上传file类\r\n\r\n    //常用请求\r\n    static seriesRequest(method, path, params = {}, headers = {}) {\r\n        let url = `${getServiceURL()}${path}`;\r\n        if (path.includes(\"http\")) url = path;\r\n\r\n        // headers[\"Content-Type\"] = \"application/json;charset=utf-8\";\r\n        // headers[\"Authorization\"] = \"Bearer \" + MyStorage.load(\"token\");\r\n\r\n        let request;\r\n        if (method === \"GET\" || method === \"DELETE\") {\r\n            let paramsArray = [];\r\n            //encodeURIComponent\r\n            Object.keys(params).forEach((key) => paramsArray.push(key + \"=\" + encodeURIComponent(params[key])));\r\n            if (paramsArray.length > 0) {\r\n                url += \"?\" + paramsArray.join(\"&\");\r\n            }\r\n\r\n            request = new Request(url, {\r\n                method: method,\r\n                headers: headers,\r\n            });\r\n        } else if (method === \"GETF\") {\r\n            let paramsArray = [];\r\n            //encodeURIComponent\r\n            Object.keys(params).forEach((key) => paramsArray.push(key + \"=\" + encodeURIComponent(params[key])));\r\n            if (paramsArray.length > 0) {\r\n                url += \"?\" + paramsArray.join(\"&\");\r\n            }\r\n            request = new Request(url, {\r\n                method: \"GET\",\r\n                headers: headers,\r\n                credentials: \"include\",\r\n            });\r\n        } else {\r\n            let bodyStr = JSON.stringify(params);\r\n\r\n            if (method === \"POST\") {\r\n                request = new Request(url, {\r\n                    method: \"POST\",\r\n                    headers: headers,\r\n                    body: bodyStr,\r\n                });\r\n            } else if (method === \"PUT\") {\r\n                request = new Request(url, {\r\n                    method: \"PUT\",\r\n                    headers: headers,\r\n                    body: bodyStr,\r\n                });\r\n            } else if (method === \"PUTF\") {\r\n                request = new Request(url, {\r\n                    method: \"PUT\",\r\n                    headers: headers,\r\n                    credentials: \"include\",\r\n                    body: bodyStr,\r\n                });\r\n            } else if (method === \"POSTF\") {\r\n                // 域账号登陆\r\n                request = new Request(url, {\r\n                    method: \"POST\",\r\n                    headers: headers,\r\n                    body: bodyStr,\r\n                    credentials: \"include\",\r\n                });\r\n            }\r\n        }\r\n        return request;\r\n    }\r\n}\r\n","/*\r\n * @Description: 请求分发处理\r\n * @Author: zhangbo\r\n * @Date: 2020-09-22\r\n */\r\n// import { message } from \"antd\";\r\nexport default class RequestDispatch {\r\n    /* Params\r\n     ** 1、fetch参数\r\n     ** 2、控制是否直接返回数据\r\n     ** 3、控制是否需要loading，默认有\r\n     */\r\n    static handleRequest(request, responseType) {\r\n        if (responseType === \"arrayBuffer\") {\r\n            return fetch(request);\r\n        } else {\r\n            return fetch(request)\r\n                .then((res) => {\r\n                    if (res.status >= 200 && res.status <= 300) {\r\n                        return res.json();\r\n                    } else {\r\n                        throw res;\r\n                    }\r\n                })\r\n                .then((res) => {\r\n                    if (res.success != 1) {\r\n                        // message.error(res.msg);\r\n                    }\r\n                    return res;\r\n                })\r\n                .catch((res) => {\r\n                    if (res == \"TypeError: Failed to fetch\" || res == \"SyntaxError: Unexpected end of JSON input\") {\r\n                        // message.error(\"请检查网络连接后刷新重试\");\r\n                        return;\r\n                    }\r\n\r\n                    let msg = \"请求失败\";\r\n                    if (res.status === 401) {\r\n                        msg = \"授权认证失败，请重新登陆\";\r\n                        location.href = \"./login.html\";\r\n                    } else if (500 === res.status) {\r\n                        msg = \"服务请求异常\";\r\n                    } else if (403 === res.status) {\r\n                        msg = \"接口禁止访问\";\r\n                    } else if (404 === res.status) {\r\n                        msg = \"服务不存在\";\r\n                    } else if (res.status >= 400 && res.status < 500) {\r\n                        msg = \"请求数据格式错误\";\r\n                    }\r\n\r\n                    // message.error(msg);\r\n                    return { code: res.status };\r\n                });\r\n        }\r\n    }\r\n}\r\n","/*\r\n * @Description: 业务api接口\r\n * @Author: zhangbo\r\n * @Date: 2020-09-22\r\n */\r\nimport RequestUtil from \"./RequestUtil\";\r\nimport RequestDispatch from \"./RequestDispatch\";\r\n\r\nexport const LoginService = {\r\n    //登录\r\n    // login: function (obj) {\r\n    //     let request = RequestUtil.seriesRequest(\"POST\", \"/api/sys/auth/login\", obj, {\r\n    //         \"Content-Type\": \"application/x-www-form-urlencoded\",\r\n    //     });\r\n    //     return RequestDispatch.handleRequest(request, \"\", true);\r\n    // },\r\n\r\n    login: function (obj) {\r\n        let request = RequestUtil.seriesRequest(\r\n            \"GET\",\r\n            \"https://raw.githubusercontent.com/bing-deng/Demo/master/login.json\"\r\n        );\r\n        return RequestDispatch.handleRequest(request);\r\n    },\r\n};\r\n","/*\r\n * @Description: 业务api接口\r\n * @Author: zhangbo\r\n * @Date: 2020-09-22\r\n */\r\nimport RequestUtil from \"./RequestUtil\";\r\nimport RequestDispatch from \"./RequestDispatch\";\r\n\r\nexport const DashboardService = {\r\n    fetchUserInfo: function (obj) {\r\n        let request = RequestUtil.seriesRequest(\r\n            \"GET\",\r\n            \"https://raw.githubusercontent.com/bing-deng/Demo/master/dashboard.json\"\r\n        );\r\n        return RequestDispatch.handleRequest(request);\r\n    },\r\n};\r\n","import { LoginService } from \"./LoginService\";\r\nimport { DashboardService } from \"./DashboardService\";\r\n\r\nconst APIService = {\r\n    ...LoginService,\r\n    ...DashboardService,\r\n};\r\n\r\nexport default APIService;\r\n"],"sourceRoot":""}